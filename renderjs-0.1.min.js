"use strict";var RENDERJS_ENABLE_IMPLICIT_GADGET_RENDERING=true;var RENDERJS_ENABLE_IMPLICIT_INTERACTION_BIND=true;if(typeof console==="undefined"||typeof console.log==="undefined"){console={};console.log=function(){}}var RenderJs=(function(){var i=false;return{init:function(){if(RENDERJS_ENABLE_IMPLICIT_GADGET_RENDERING){RenderJs.bootstrap($('body'))}if(RENDERJS_ENABLE_IMPLICIT_INTERACTION_BIND){var c=RenderJs.GadgetIndex.getRootGadget();if(c!==undefined){RenderJs.bindReady(function(){$("div[data-gadget-connection]").each(function(a,b){RenderJs.InteractionGadget.bind($(b))})})}}},bootstrap:function(a){var b,is_gadget;b=a.attr("id");is_gadget=a.attr("data-gadget")!==undefined;if(is_gadget&&b!==undefined){RenderJs.loadGadget(a)}RenderJs.loadRecursiveGadget(a)},loadRecursiveGadget:function(a){var b,gadget,gadget_id,gadget_js;b=a.find("[data-gadget]");b.each(function(){gadget=$(this);gadget_id=gadget.attr("id");gadget_js=new RenderJs.Gadget(gadget_id,gadget);RenderJs.GadgetIndex.registerGadget(gadget_js)});b.each(function(){RenderJs.loadGadget($(this))})},setGadgetAndRecurse:function(a,b){a.append(b);RenderJs.loadRecursiveGadget(a)},loadGadget:function(c){var d,gadget_id,gadget_property,cacheable,cache_id,app_cache,data,gadget_js;d=c.attr("data-gadget");gadget_id=c.attr("id");gadget_js=RenderJs.GadgetIndex.getGadgetById(gadget_id);if(gadget_js===undefined){gadget_js=new RenderJs.Gadget(gadget_id,c);RenderJs.GadgetIndex.registerGadget(gadget_js)}gadget_property=c.attr("data-gadget-property");if(gadget_property!==undefined){gadget_property=$.parseJSON(gadget_property);$.each(gadget_property,function(a,b){gadget_js[a]=b})}if(d!==undefined&&d!==""){cacheable=c.attr("data-gadget-cacheable");cache_id=c.attr("data-gadget-cache-id");if(cacheable!==undefined&&cache_id!==undefined){cacheable=Boolean(parseInt(cacheable,10))}if(cacheable){app_cache=RenderJs.Cache.get(cache_id,undefined);if(app_cache===undefined||app_cache===null){$.ajax({url:d,yourCustomData:{"gadget_id":gadget_id,"cache_id":cache_id},success:function(a){cache_id=this.yourCustomData.cache_id;gadget_id=this.yourCustomData.gadget_id;RenderJs.Cache.set(cache_id,a);RenderJs.GadgetIndex.getGadgetById(gadget_id).setReady();RenderJs.setGadgetAndRecurse(c,a);RenderJs.checkAndTriggerReady()}})}else{data=app_cache;gadget_js.setReady();this.setGadgetAndRecurse(c,data);this.checkAndTriggerReady()}}else{$.ajax({url:d,yourCustomData:{"gadget_id":gadget_id},success:function(a){gadget_id=this.yourCustomData.gadget_id;RenderJs.GadgetIndex.getGadgetById(gadget_id).setReady();RenderJs.setGadgetAndRecurse(c,a);RenderJs.checkAndTriggerReady()}})}}else{gadget_js.setReady();RenderJs.checkAndTriggerReady()}},isReady:function(a){return i},setReady:function(a){i=a},bindReady:function(a){$("body").one("ready",a)},checkAndTriggerReady:function(){var a;a=RenderJs.GadgetIndex.isGadgetListLoaded();if(a){if(!RenderJs.isReady()){RenderJs.GadgetIndex.getRootGadget().getDom().trigger("ready");$("body").trigger("ready");RenderJs.setReady(true)}}return a},updateGadgetData:function(c){var d,data_handler;d=c.attr("data-gadget-source");data_handler=c.attr("data-gadget-handler");if(d!==undefined&&d!==""){$.ajax({url:d,dataType:"json",yourCustomData:{"data_handler":data_handler},success:function(a){var b;b=this.yourCustomData.data_handler;if(b!==undefined){eval(b+"(result)")}}})}},addGadget:function(a,b,c,d){var e,tab_container,tab_gadget;tab_container=$('#'+a);tab_container.empty();e=['<div class="gadget" ','data-gadget="'+b+'"','data-gadget-handler="'+c+'" ','data-gadget-source="'+d+'"></div>'].join('\n');tab_container.append(e);tab_gadget=tab_container.find(".gadget");RenderJs.bootstrap(tab_container);RenderJs.setReady(false);return tab_gadget},Cache:(function(){return{ROOT_CACHE_ID:'APP_CACHE',getCacheId:function(a){return this.ROOT_CACHE_ID+a},hasLocalStorage:function(){var a;a='localstorage_test_12345678';try{localStorage.setItem(a,a);localStorage.removeItem(a);return true}catch(e){return false}},get:function(a,b){a=this.getCacheId(a);if(this.hasLocalStorage()){return this.LocalStorageCachePlugin.get(a,b)}return this.NameSpaceStorageCachePlugin.get(a,b)},set:function(a,b){a=this.getCacheId(a);if(this.hasLocalStorage()){this.LocalStorageCachePlugin.set(a,b)}else{this.NameSpaceStorageCachePlugin.set(a,b)}},LocalStorageCachePlugin:(function(){return{get:function(a,b){if(a in localStorage){return JSON.parse(localStorage.getItem(a))}else{return b}},set:function(a,b){localStorage.setItem(a,JSON.stringify(b))}}}()),NameSpaceStorageCachePlugin:(function(){var c={};return{get:function(a,b){return c[a]},set:function(a,b){c[a]=b}}}())}}()),Gadget:(function(a,b){this.id=a;this.dom=b;this.is_ready=false;this.getId=function(){return this.id};this.getDom=function(){return this.dom};this.isReady=function(){return this.is_ready};this.setReady=function(){this.is_ready=true}}),TabbularGadget:(function(){return{toggleVisibility:function(a){$(".selected").addClass("not_selected");$(".selected").removeClass("selected");a.addClass("selected");a.removeClass("not_selected")},addNewTabGadget:function(a,b,c,d){var e;e=RenderJs.addGadget(a,b,c,d)}}}()),GadgetIndex:(function(){var e=[];return{getGadgetList:function(){return e},registerGadget:function(a){e.push(a)},unregisterGadget:function(a){var b=$.inArray(a,e);if(b!==-1){e.splice(b,1)}},getGadgetById:function(c){var d;d=undefined;$(RenderJs.GadgetIndex.getGadgetList()).each(function(a,b){if(b.getId()===c){d=b}});return d},getRootGadget:function(){return this.getGadgetList()[0]},isGadgetListLoaded:function(){var c;c=true;$(this.getGadgetList()).each(function(a,b){if(b.isReady()===false){c=false}});return c}}}()),InteractionGadget:(function(){return{bind:function(g){var h,gadget_connection_list,createMethodInteraction=function(a,b,c,d,e){var f=function(){RenderJs.GadgetIndex.getGadgetById(b)[a].apply(null,arguments);RenderJs.GadgetIndex.getGadgetById(d).dom.trigger(c)};return f},createTriggerInteraction=function(a,b){var c=function(){RenderJs.GadgetIndex.getGadgetById(a)[b].apply(null,arguments)};return c};h=g.attr("id");gadget_connection_list=g.attr("data-gadget-connection");gadget_connection_list=$.parseJSON(gadget_connection_list);$.each(gadget_connection_list,function(a,b){var c,source_gadget_id,source_method_id,source_gadget,destination,destination_gadget_id,destination_method_id,destination_gadget,original_source_method_id;c=b.source.split(".");source_gadget_id=c[0];source_method_id=c[1];source_gadget=RenderJs.GadgetIndex.getGadgetById(source_gadget_id);destination=b.destination.split(".");destination_gadget_id=destination[0];destination_method_id=destination[1];destination_gadget=RenderJs.GadgetIndex.getGadgetById(destination_gadget_id);if(source_gadget.hasOwnProperty(source_method_id)){original_source_method_id="original_"+source_method_id;source_gadget[original_source_method_id]=source_gadget[source_method_id];source_gadget[source_method_id]=createMethodInteraction(original_source_method_id,source_gadget_id,source_method_id,destination_gadget_id,destination_method_id);destination_gadget.dom.bind(source_method_id,createTriggerInteraction(destination_gadget_id,destination_method_id))}else{source_gadget.dom.bind(source_method_id,createTriggerInteraction(destination_gadget_id,destination_method_id))}})}}}())}}());$(document).ready(function(){RenderJs.init()});