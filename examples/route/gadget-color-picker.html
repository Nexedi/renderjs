<html>
  <head>
    <link type="text/css" href="gadget-color-picker.css" rel="stylesheet">
  </head>
  <body>
    <h2> Color picker</h2>
    <div class="body">

    <a href="#unknown">Wrong global route</a>
    <ul style="list-style: none;">
      <li><a href="#/color/0/0/0/" class="list-item" style="background-color:rgb(0,0,0);">&nbsp;</a></li>
      <li><a href="#/color/0/0/150/" class="list-item" style="background-color:rgb(0,0,150);">&nbsp;</a></li>
      <li><a href="#/color/0/150/0/" class="list-item" style="background-color:rgb(0,150,0);">&nbsp;</a></li>
      <li><a href="#/color/0/150/150/" class="list-item" style="background-color:rgb(0,150,150);">&nbsp;</a></li>
      <li><a href="#/color/150/0/0/" class="list-item" style="background-color:rgb(150,0,0);">&nbsp;</a></li>
      <li><a href="#/color/150/0/150/" class="list-item" style="background-color:rgb(150,0,150);">&nbsp;</a></li>
      <li><a href="#/color/150/150/0/" class="list-item" style="background-color:rgb(150,150,0);">&nbsp;</a></li>
      <li><a href="#/color/150/150/150/" class="list-item" style="background-color:rgb(150,150,150);">&nbsp;</a></li>
      <li style="text-align: center;"><a href="#/color/X/X/X" style="text-decoration: none; display: block; width: 2em;">XXX</a></li>
    </ul>
    <div class="select-color" style="display: block;"></div>

    <div class="container"></div>

    </div>

    <script type="text/javascript" language="javascript">
      //<![CDATA[
        $(document).ready(function() {
            gadget = RenderJs.getSelfGadget();

            gadget.redirect = function () {
              // Default route. Redirect to color subapp
              $.url.redirect('/color/');
            };

            gadget.selectColorMessage = function () {
              $('.select-color').text("Please select a color");
            };

            gadget.updateColor = function (red, green, blue) {
              $('.select-color').html(
                "<div style='background-color:rgb(" + red + "," + green + "," + blue + ");'>&nbsp;<\/div>" +
                "<p>Color (" + red + "," + green + "," + blue + ") selected at " + new Date() + "<\/p>");
            };

            gadget.initRoutes = function () {
              // XXX: improve this part so we can declare in RouteGadget
              RenderJs.RouteGadget.go($.url.getPath(),
                                      function () {
                                        $('.select-color').html("Unknown color (" + $.url.getPath() + ")");},
                                      2);
            };
        });
      //]]>
    </script>
  </body>
</html>
